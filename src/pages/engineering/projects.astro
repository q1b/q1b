---
import EngineeringLayout from "../../layouts/EngineeringLayout.astro";
import ProjectCard from "../../components/ProjectCard.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects")).filter(
  (project) => project.data.visible,
);

const majorProjects = projects.filter((p) => p.data.isMajorProject);
const otherProjects = projects.filter((p) => !p.data.isMajorProject);
---

<EngineeringLayout
  title="Projects"
  description="Showcase of software engineering projects and applications"
>
  <main class="flex mt-8 sm:mt-0 w-full max-w-4xl flex-col gap-8">
    <!-- Hero Section -->
    <section class="text-center py-8">
      <h1 class="text-4xl md:text-5xl font-bold text-slate-950 dark:text-slate-50 mb-4">
        Projects
      </h1>
      <p class="text-lg text-slate-600 dark:text-slate-300">
        A collection of applications and tools I've built
      </p>
    </section>

    <!-- Major Projects -->
    {majorProjects.length > 0 && (
      <section>
        <h2 class="text-3xl font-bold text-slate-950 dark:text-slate-50 mb-6">
          Featured Projects
        </h2>
        <div class="grid grid-cols-1 gap-6">
          {majorProjects.map((project) => (
            <div id={project.id}>
              <ProjectCard
                title={project.data.title}
                description={project.data.shortDescription}
                githubURL={project.data.githubURL}
                websiteURL={project.data.websiteURL}
              />
            </div>
          ))}
        </div>
      </section>
    )}

    <!-- Other Projects -->
    {otherProjects.length > 0 && (
      <section>
        <h2 class="text-3xl font-bold text-slate-950 dark:text-slate-50 mb-6">
          More Projects
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          {otherProjects.map((project) => (
            <div id={project.id}>
              <ProjectCard
                title={project.data.title}
                description={project.data.shortDescription}
                githubURL={project.data.githubURL}
                websiteURL={project.data.websiteURL}
              />
            </div>
          ))}
        </div>
      </section>
    )}

    {projects.length === 0 && (
      <section class="text-center py-12">
        <p class="text-lg text-slate-600 dark:text-slate-300">
          Projects coming soon...
        </p>
      </section>
    )}

    <!-- Open Source Contribution -->
    <section class="rounded-lg border-2 border-blue-200 dark:border-blue-700 bg-white dark:bg-blue-900/30 p-8">
      <h2 class="text-2xl font-bold text-slate-950 dark:text-slate-50 mb-4">
        Open Source Contributions
      </h2>
      <p class="text-slate-700 dark:text-slate-300 mb-4">
        I'm passionate about contributing to open source projects and improving tools that the community depends on. Check out my GitHub for ongoing contributions and collaborations.
      </p>
      <a
        href="https://github.com/q1b"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-block px-6 py-3 bg-slate-900 text-white rounded-lg font-semibold hover:bg-slate-800 transition-colors dark:bg-slate-700 dark:hover:bg-slate-600"
      >
        Explore on GitHub
      </a>
    </section>

    <!-- CTA Section -->
    <section class="rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-700 dark:to-indigo-700 p-8 text-white text-center">
      <h2 class="text-2xl font-bold mb-4">
        Have a Project in Mind?
      </h2>
      <p class="mb-6">
        I'm available for freelance work and collaborations. Let's build something great together.
      </p>
      <a
        href="/contact"
        class="inline-block px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-colors"
      >
        Start a Conversation
      </a>
    </section>
  </main>
</EngineeringLayout>
