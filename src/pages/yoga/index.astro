---
import YogaLayout from "../../layouts/YogaLayout.astro";
import { getCollection } from "astro:content";
import profile from "../../singletons/profile/index.json";

const classes = (await getCollection("classes")).filter(
  (cls) => cls.data.visible,
);
const practices = (await getCollection("practices")).filter(
  (practice) => practice.data.visible,
);
const teachings = (await getCollection("teachings")).filter(
  (teaching) => teaching.data.visible,
);

const yogaProfile = profile.yoga;
---

<YogaLayout
  title={`${yogaProfile.title} - Yoga & Meditation`}
  description={yogaProfile.bio}
>
  <main class="flex mt-8 sm:mt-0 w-full max-w-4xl flex-col gap-12">
    <!-- Hero Section -->
    <section class="flex flex-col gap-6 items-center text-center py-8">
      <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-amber-300 dark:border-amber-600">
        <img
          src={yogaProfile.image}
          alt="Yoga Teacher"
          class="w-full h-full object-cover"
        />
      </div>
      <div>
        <h1 class="text-4xl md:text-5xl font-bold text-amber-950 dark:text-amber-50 mb-2">
          {yogaProfile.title}
        </h1>
        <p class="text-xl text-amber-700 dark:text-amber-300 mb-4">
          {yogaProfile.subtitle}
        </p>
        <p class="text-amber-800 dark:text-amber-200 max-w-2xl">
          {yogaProfile.bio}
        </p>
      </div>
    </section>

    <!-- Quick Stats -->
    <section class="grid grid-cols-3 gap-4 text-center">
      <div class="rounded-lg bg-amber-100 dark:bg-amber-900/40 p-4">
        <p class="text-2xl font-bold text-amber-700 dark:text-amber-300">
          {classes.length}
        </p>
        <p class="text-sm text-amber-700 dark:text-amber-300">
          Classes Offered
        </p>
      </div>
      <div class="rounded-lg bg-amber-100 dark:bg-amber-900/40 p-4">
        <p class="text-2xl font-bold text-amber-700 dark:text-amber-300">
          {practices.length}
        </p>
        <p class="text-sm text-amber-700 dark:text-amber-300">
          Guided Practices
        </p>
      </div>
      <div class="rounded-lg bg-amber-100 dark:bg-amber-900/40 p-4">
        <p class="text-2xl font-bold text-amber-700 dark:text-amber-300">
          {teachings.length}
        </p>
        <p class="text-sm text-amber-700 dark:text-amber-300">
          Teachings
        </p>
      </div>
    </section>

    <!-- Featured Classes -->
    <section>
      <h2 class="text-3xl font-bold text-amber-950 dark:text-amber-50 mb-6">
        Featured Classes
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {classes.slice(0, 4).map((cls) => (
          <a
            href={`/yoga/classes#${cls.id}`}
            class="rounded-lg border-2 border-amber-200 dark:border-amber-700 bg-white dark:bg-amber-900/30 p-6 hover:shadow-lg transition-shadow hover:border-amber-400 dark:hover:border-amber-500"
          >
            <h3 class="text-lg font-bold text-amber-950 dark:text-amber-50 mb-2">
              {cls.data.title}
            </h3>
            <p class="text-sm text-amber-700 dark:text-amber-300 mb-3">
              {cls.data.description}
            </p>
            <div class="flex items-center justify-between text-sm">
              <span class="text-amber-700 dark:text-amber-300">
                {cls.data.duration} min
              </span>
              <span class="text-xs bg-amber-100 dark:bg-amber-800/50 text-amber-900 dark:text-amber-100 px-2 py-1 rounded capitalize">
                {cls.data.level}
              </span>
            </div>
          </a>
        ))}
      </div>
      <a
        href="/yoga/classes"
        class="mt-6 inline-block px-6 py-3 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700 transition-colors"
      >
        View All Classes →
      </a>
    </section>

    <!-- Featured Practices -->
    <section>
      <h2 class="text-3xl font-bold text-amber-950 dark:text-amber-50 mb-6">
        Guided Practices
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {practices.slice(0, 3).map((practice) => (
          <a
            href={`/yoga/practices#${practice.id}`}
            class="rounded-lg border-2 border-amber-200 dark:border-amber-700 bg-white dark:bg-amber-900/30 p-6 hover:shadow-lg transition-shadow hover:border-amber-400 dark:hover:border-amber-500"
          >
            <h3 class="text-lg font-bold text-amber-950 dark:text-amber-50 mb-2">
              {practice.data.title}
            </h3>
            <p class="text-sm text-amber-700 dark:text-amber-300 mb-3">
              {practice.data.description}
            </p>
            <div class="flex items-center justify-between text-sm">
              <span class="text-amber-700 dark:text-amber-300">
                {practice.data.duration} min
              </span>
              <span class="text-xs bg-amber-100 dark:bg-amber-800/50 text-amber-900 dark:text-amber-100 px-2 py-1 rounded capitalize">
                {practice.data.type}
              </span>
            </div>
          </a>
        ))}
      </div>
      <a
        href="/yoga/practices"
        class="mt-6 inline-block px-6 py-3 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700 transition-colors"
      >
        Explore All Practices →
      </a>
    </section>

    <!-- Call to Action -->
    <section class="rounded-lg bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-700 dark:to-amber-800 p-8 text-white text-center">
      <h2 class="text-2xl font-bold mb-4">
        Ready to Begin Your Practice?
      </h2>
      <p class="mb-6 text-white/90">
        Join our community and discover the transformative power of yoga and meditation. Start your journey toward wellness and inner peace today.
      </p>
      <a
        href="/contact"
        class="inline-block px-6 py-3 bg-white text-amber-600 rounded-lg font-semibold hover:bg-amber-50 transition-colors"
      >
        Get in Touch
      </a>
    </section>
  </main>
</YogaLayout>
