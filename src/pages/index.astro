---
import Layout from "../layouts/Layout.astro";
import profile from "../singletons/profile/index.json";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects")).filter(
  (project) => project.data.visible,
);

const classes = (await getCollection("classes")).filter(
  (cls) => cls.data.visible,
);

const resumes = import.meta.glob("/src/assets/files/resume/*.pdf");
if (!resumes[profile.resumePDF]) throw new Error(`"${profile.resumePDF}" does not exist in glob: "/src/assets/files/resume/*.pdf"`);
const resume = await resumes[profile.resumePDF]();

const engineeringProfile = profile.engineering;
const yogaProfile = profile.yoga;
---

<Layout title="Sukhpreet Singh | Yoga Teacher & Software Engineer" description="Explore two interconnected professional identities: a yoga & meditation teacher and a software engineer.">
  <main class="flex mt-8 sm:mt-0 w-full max-w-5xl flex-col gap-16">
    <!-- Hero Section - Dual Identity -->
    <section class="flex flex-col gap-8 items-center py-8">
      <div class="text-center">
        <h1 class="text-5xl md:text-6xl font-bold text-slate-950 dark:text-white mb-4">
          Sukhpreet Singh
        </h1>
        <p class="text-2xl font-semibold text-slate-600 dark:text-slate-300">
          Yoga Teacher & Software Engineer
        </p>
      </div>

      <!-- Dual Identity Cards -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-2xl mt-6">
        <!-- Yoga Card -->
        <a
          href="/yoga"
          class="rounded-lg border-2 border-amber-300 dark:border-amber-600 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/40 dark:to-amber-800/40 p-8 hover:shadow-lg transition-all hover:scale-105"
        >
          <div class="flex flex-col gap-3 items-center text-center">
            <div class="text-4xl">üßò</div>
            <h2 class="text-2xl font-bold text-amber-950 dark:text-amber-50">
              Yoga & Meditation
            </h2>
            <p class="text-sm text-amber-800 dark:text-amber-200">
              {yogaProfile.subtitle}
            </p>
            <span class="mt-4 inline-block text-amber-700 dark:text-amber-300 font-semibold">
              Explore Yoga ‚Üí
            </span>
          </div>
        </a>

        <!-- Engineering Card -->
        <a
          href="/engineering"
          class="rounded-lg border-2 border-blue-400 dark:border-blue-600 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/40 dark:to-blue-800/40 p-8 hover:shadow-lg transition-all hover:scale-105"
        >
          <div class="flex flex-col gap-3 items-center text-center">
            <div class="text-4xl">üíª</div>
            <h2 class="text-2xl font-bold text-blue-950 dark:text-blue-50">
              Software Engineering
            </h2>
            <p class="text-sm text-blue-800 dark:text-blue-200">
              {engineeringProfile.subtitle}
            </p>
            <span class="mt-4 inline-block text-blue-700 dark:text-blue-300 font-semibold">
              View Portfolio ‚Üí
            </span>
          </div>
        </a>
      </div>
    </section>

    <!-- Quick Links Section -->
    <section class="flex flex-col gap-8">
      <h2 class="text-3xl font-bold text-slate-950 dark:text-white text-center">
        Quick Access
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Yoga Quick Links -->
        <div class="space-y-4">
          <h3 class="text-xl font-bold text-amber-700 dark:text-amber-300 flex items-center gap-2">
            <span>üåø</span> Latest Classes
          </h3>
          <ul class="space-y-2">
            {classes.slice(0, 3).map((cls) => (
              <li>
                <a
                  href="/yoga/classes"
                  class="flex items-center justify-between p-3 rounded-lg border border-amber-200 dark:border-amber-700 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors"
                >
                  <span class="text-amber-900 dark:text-amber-100 font-medium">
                    {cls.data.title}
                  </span>
                  <span class="text-xs text-amber-700 dark:text-amber-300">
                    {cls.data.duration}m
                  </span>
                </a>
              </li>
            ))}
          </ul>
          <a
            href="/yoga"
            class="inline-block text-amber-600 dark:text-amber-300 hover:underline font-semibold text-sm mt-2"
          >
            Explore Yoga Hub ‚Üí
          </a>
        </div>

        <!-- Engineering Quick Links -->
        <div class="space-y-4">
          <h3 class="text-xl font-bold text-blue-700 dark:text-blue-300 flex items-center gap-2">
            <span>‚ö°</span> Recent Projects
          </h3>
          <ul class="space-y-2">
            {projects.slice(0, 3).map((project) => (
              <li>
                <a
                  href="/engineering/projects"
                  class="flex items-center justify-between p-3 rounded-lg border border-blue-200 dark:border-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors"
                >
                  <span class="text-blue-900 dark:text-blue-100 font-medium truncate">
                    {project.data.title}
                  </span>
                  {project.data.isMajorProject && (
                    <span class="text-xs bg-blue-200 dark:bg-blue-800 text-blue-900 dark:text-blue-100 px-2 py-1 rounded">
                      Featured
                    </span>
                  )}
                </a>
              </li>
            ))}
          </ul>
          <a
            href="/engineering"
            class="inline-block text-blue-600 dark:text-blue-300 hover:underline font-semibold text-sm mt-2"
          >
            View All Projects ‚Üí
          </a>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="rounded-lg bg-slate-100 dark:bg-slate-900/30 border border-slate-200 dark:border-slate-700 p-8">
      <h2 class="text-3xl font-bold text-slate-950 dark:text-white mb-6">
        About This Site
      </h2>
      <p class="text-slate-700 dark:text-slate-300 mb-4 leading-relaxed">
        This website showcases two interconnected yet distinct professional identities. The Yoga & Meditation section highlights teaching practices, guided meditations, and wellness wisdom. The Software Engineering section displays technical projects, work experience, and development expertise.
      </p>
      <p class="text-slate-700 dark:text-slate-300 mb-6 leading-relaxed">
        Both sections embody the same core values: mindfulness, excellence, continuous growth, and creating meaningful value. Navigate between them to explore the full picture of my professional journey.
      </p>
      <a
        href="/about"
        class="inline-block px-6 py-3 bg-slate-900 text-white rounded-lg font-semibold hover:bg-slate-800 transition-colors dark:bg-slate-700 dark:hover:bg-slate-600"
      >
        Learn More About Me
      </a>
    </section>

    <!-- Call to Action Section -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Resume CTA -->
      <a
        href={resume.default ?? "#"}
        target="_blank"
        rel="external"
        class="rounded-lg border-2 border-indigo-400 bg-white dark:bg-indigo-900/30 dark:border-indigo-600 p-6 hover:shadow-lg transition-all hover:scale-105 text-center"
      >
        <div class="text-3xl mb-3">üìÑ</div>
        <h3 class="font-bold text-slate-950 dark:text-slate-50 mb-2">
          Download Resume
        </h3>
        <p class="text-sm text-slate-700 dark:text-slate-300 mb-4">
          Get my full CV and qualifications
        </p>
        <span class="text-indigo-600 dark:text-indigo-300 font-semibold text-sm">
          View Resume ‚Üí
        </span>
      </a>

      <!-- Contact CTA -->
      <a
        href="/contact"
        class="rounded-lg border-2 border-cyan-400 bg-white dark:bg-cyan-900/30 dark:border-cyan-600 p-6 hover:shadow-lg transition-all hover:scale-105 text-center"
      >
        <div class="text-3xl mb-3">üí¨</div>
        <h3 class="font-bold text-slate-950 dark:text-slate-50 mb-2">
          Get in Touch
        </h3>
        <p class="text-sm text-slate-700 dark:text-slate-300 mb-4">
          Inquiries about yoga or development
        </p>
        <span class="text-cyan-600 dark:text-cyan-300 font-semibold text-sm">
          Contact Me ‚Üí
        </span>
      </a>

      <!-- GitHub CTA -->
      <a
        href={profile.githubURL}
        target="_blank"
        rel="noopener noreferrer"
        class="rounded-lg border-2 border-slate-400 bg-white dark:bg-slate-900/30 dark:border-slate-600 p-6 hover:shadow-lg transition-all hover:scale-105 text-center"
      >
        <div class="text-3xl mb-3">üêô</div>
        <h3 class="font-bold text-slate-950 dark:text-slate-50 mb-2">
          GitHub Profile
        </h3>
        <p class="text-sm text-slate-700 dark:text-slate-300 mb-4">
          Explore my open source work
        </p>
        <span class="text-slate-600 dark:text-slate-300 font-semibold text-sm">
          View GitHub ‚Üí
        </span>
      </a>
    </section>

    <!-- Navigation Info -->
    <section class="text-center py-8 border-t border-slate-200 dark:border-slate-700">
      <h2 class="text-2xl font-bold text-slate-950 dark:text-white mb-4">
        Navigate Between Worlds
      </h2>
      <p class="text-slate-700 dark:text-slate-300 mb-6">
        Use the header navigation to seamlessly switch between the Yoga & Meditation and Software Engineering sections, or explore shared pages like About and Contact.
      </p>
      <div class="flex flex-wrap justify-center gap-3">
        <a href="/yoga" class="px-4 py-2 rounded-lg bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 font-semibold hover:bg-amber-200 dark:hover:bg-amber-900/50 transition-colors text-sm">
          Yoga Hub
        </a>
        <a href="/engineering" class="px-4 py-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-semibold hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors text-sm">
          Engineering Hub
        </a>
        <a href="/about" class="px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-semibold hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors text-sm">
          About
        </a>
        <a href="/contact" class="px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-semibold hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors text-sm">
          Contact
        </a>
      </div>
    </section>
  </main>
</Layout>
